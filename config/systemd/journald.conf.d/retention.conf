# =================================================================
# journald Configuration - Log Retention
# =================================================================
# Copy to: /etc/systemd/journald.conf.d/retention.conf
# Apply: sudo systemctl restart systemd-journald
# Check: journalctl --disk-usage
# =================================================================

[Journal]
# ===========================================
# STORAGE (CRITICAL)
# ===========================================

# Store logs persistently (survives reboot)
Storage=persistent

# Compress old journal files
Compress=yes

# Seal journal files (prevents tampering)
Seal=yes

# ===========================================
# SIZE LIMITS
# ===========================================

# Maximum disk space for journal files
SystemMaxUse=500M

# Keep at least this much free on disk
SystemKeepFree=1G

# Maximum size of individual journal file
SystemMaxFileSize=50M

# Runtime journal (in /run) limits
RuntimeMaxUse=100M
RuntimeKeepFree=100M

# ===========================================
# RETENTION
# ===========================================

# Maximum retention time
MaxRetentionSec=30day

# ===========================================
# RATE LIMITING
# ===========================================

# Rate limit interval
RateLimitIntervalSec=30s

# Maximum messages per interval
RateLimitBurst=10000

# ===========================================
# FORWARDING
# ===========================================

# Forward to syslog
ForwardToSyslog=yes

# Forward to console (disable for production)
ForwardToConsole=no

# Forward to wall (disable for production)
ForwardToWall=yes

# ===========================================
# JOURNAL SPLIT
# ===========================================

# Split journals by user
SplitMode=uid

events {}

http {
  access_log off;
  error_log /dev/stderr warn;

  server {
    listen 9324;

    # Docker daemon metrics are exposed by dockerd at:
    #   http://<host>:9323/metrics
    # (blueprint sets dockerd: "metrics-addr": "0.0.0.0:9323")
    # This proxy makes them reachable from the monitoring Docker network.
    location / {
      proxy_pass http://host.docker.internal:9323;
      proxy_http_version 1.1;
      proxy_set_header Host $host;
    }
  }
}
